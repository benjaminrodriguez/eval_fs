-- MySQL Script generated by MySQL Workbench
-- Sun Jan  6 23:43:05 2019
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema eval_fin
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `eval_fin` ;

-- -----------------------------------------------------
-- Schema eval_fin
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `eval_fin` DEFAULT CHARACTER SET utf8 ;
USE `eval_fin` ;

-- -----------------------------------------------------
-- Table `eval_fin`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_fin`.`user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nom` VARCHAR(45) NOT NULL,
  `prenom` VARCHAR(45) NOT NULL,
  `email` VARCHAR(255) NOT NULL,
  `password` VARCHAR(255) NOT NULL,
  `profession` VARCHAR(45) NOT NULL,
  `profil_picture` MEDIUMTEXT NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_fin`.`patient`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_fin`.`patient` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nom` VARCHAR(45) NULL,
  `prenom` VARCHAR(45) NULL,
  `adresse` VARCHAR(45) NULL,
  `code_postal` VARCHAR(45) NULL,
  `ville` VARCHAR(45) NULL,
  `email` VARCHAR(255) NULL,
  `date_de_naissance` DATE NULL,
  `telephone` VARCHAR(45) NULL,
  `sexe` VARCHAR(45) NULL,
  `mode_de_vie` LONGTEXT NULL,
  `alimentation` LONGTEXT NULL,
  `type` ENUM('Adulte', 'Enfant', 'Animal') NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_fin`.`responsable`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_fin`.`responsable` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nom` VARCHAR(45) NULL,
  `prenom` VARCHAR(45) NULL,
  `adresse` VARCHAR(45) NULL,
  `code_postal` VARCHAR(45) NULL,
  `ville` VARCHAR(45) NULL,
  `email` VARCHAR(255) NULL,
  `date_de_naissance` VARCHAR(45) NULL,
  `telephone` VARCHAR(45) NULL,
  `sexe` VARCHAR(45) NULL,
  `patient_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_responsable_patient1_idx` (`patient_id` ASC) ,
  CONSTRAINT `fk_responsable_patient1`
    FOREIGN KEY (`patient_id`)
    REFERENCES `eval_fin`.`patient` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_fin`.`fiche_consultation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_fin`.`fiche_consultation` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `type_consultation` VARCHAR(255) NULL,
  `type_pathologie` VARCHAR(255) NULL,
  `lieu_consultation` LONGTEXT NULL,
  `protocole_utilise` VARCHAR(255) NULL,
  `resultat_obtenu` LONGTEXT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_fin`.`events`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_fin`.`events` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(45) NOT NULL,
  `date` DATE NULL,
  `start` DATETIME NOT NULL,
  `end` DATETIME NOT NULL,
  `description` MEDIUMTEXT NULL,
  `patient_id` INT NULL,
  `user_id` INT NULL,
  `fiche_consultation_id` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_events_patient1_idx` (`patient_id` ASC) ,
  INDEX `fk_events_user1_idx` (`user_id` ASC) ,
  INDEX `fk_events_fiche_consultation1_idx` (`fiche_consultation_id` ASC) ,
  CONSTRAINT `fk_events_patient1`
    FOREIGN KEY (`patient_id`)
    REFERENCES `eval_fin`.`patient` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_events_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `eval_fin`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_events_fiche_consultation1`
    FOREIGN KEY (`fiche_consultation_id`)
    REFERENCES `eval_fin`.`fiche_consultation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_fin`.`photo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_fin`.`photo` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `photo` LONGTEXT NOT NULL,
  `fiche_consultation_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_photo_fiche_consultation1_idx` (`fiche_consultation_id` ASC) ,
  CONSTRAINT `fk_photo_fiche_consultation1`
    FOREIGN KEY (`fiche_consultation_id`)
    REFERENCES `eval_fin`.`fiche_consultation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `eval_fin`.`user`
-- -----------------------------------------------------
START TRANSACTION;
USE `eval_fin`;
INSERT INTO `eval_fin`.`user` (`id`, `nom`, `prenom`, `email`, `password`, `profession`, `profil_picture`) VALUES (1, 'rodriguez', 'benjamin', 'ben@gmail.com', 'a', 'osteopathe', DEFAULT);
INSERT INTO `eval_fin`.`user` (`id`, `nom`, `prenom`, `email`, `password`, `profession`, `profil_picture`) VALUES (2, 'dupont', 'oujou', 'oujou@gmail.com', 'a', 'shiatsuki', DEFAULT);
INSERT INTO `eval_fin`.`user` (`id`, `nom`, `prenom`, `email`, `password`, `profession`, `profil_picture`) VALUES (3, 'Docteur', 'Maboul', 'docteurmaboul@test.com', 'a', 'psycho_praticien', 'http://www.neobienetre.fr/wp-content/uploads/2018/04/Devenez-Psychopraticien.jpg');

COMMIT;


-- -----------------------------------------------------
-- Data for table `eval_fin`.`patient`
-- -----------------------------------------------------
START TRANSACTION;
USE `eval_fin`;
INSERT INTO `eval_fin`.`patient` (`id`, `nom`, `prenom`, `adresse`, `code_postal`, `ville`, `email`, `date_de_naissance`, `telephone`, `sexe`, `mode_de_vie`, `alimentation`, `type`) VALUES (1, 'goya', 'chantal', '40 rue des pommiers', '75016', 'paris', 'chantale@gmail.com', '1970/08/01', '0688284887', 'femme', 'lourd', 'pas cool', 'Adulte');
INSERT INTO `eval_fin`.`patient` (`id`, `nom`, `prenom`, `adresse`, `code_postal`, `ville`, `email`, `date_de_naissance`, `telephone`, `sexe`, `mode_de_vie`, `alimentation`, `type`) VALUES (2, 'bob', 'bob', '10 rue des chataignes', '92100', 'boulogne', '', '2018/03/08', '0648137156', 'homme', 'grasse', 'croquettes', 'Animal');

COMMIT;


-- -----------------------------------------------------
-- Data for table `eval_fin`.`responsable`
-- -----------------------------------------------------
START TRANSACTION;
USE `eval_fin`;
INSERT INTO `eval_fin`.`responsable` (`id`, `nom`, `prenom`, `adresse`, `code_postal`, `ville`, `email`, `date_de_naissance`, `telephone`, `sexe`, `patient_id`) VALUES (1, 'coco', 'cheri', '15 rue des pasteques', '93120', 'bobigny', 'cooc@mail.com', '2019/04/04', '0648137169', 'homme', 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `eval_fin`.`fiche_consultation`
-- -----------------------------------------------------
START TRANSACTION;
USE `eval_fin`;
INSERT INTO `eval_fin`.`fiche_consultation` (`id`, `type_consultation`, `type_pathologie`, `lieu_consultation`, `protocole_utilise`, `resultat_obtenu`) VALUES (1, 'soin', 'emathome', 'maison', 'aucun', 'negatif');
INSERT INTO `eval_fin`.`fiche_consultation` (`id`, `type_consultation`, `type_pathologie`, `lieu_consultation`, `protocole_utilise`, `resultat_obtenu`) VALUES (2, 'prevention', 'aucun', 'hopital', 'ordi', 'positif');
INSERT INTO `eval_fin`.`fiche_consultation` (`id`, `type_consultation`, `type_pathologie`, `lieu_consultation`, `protocole_utilise`, `resultat_obtenu`) VALUES (3, 'controlr', 'aucun', 'casa', 'steto', 'inconnu');

COMMIT;


-- -----------------------------------------------------
-- Data for table `eval_fin`.`events`
-- -----------------------------------------------------
START TRANSACTION;
USE `eval_fin`;
INSERT INTO `eval_fin`.`events` (`id`, `title`, `date`, `start`, `end`, `description`, `patient_id`, `user_id`, `fiche_consultation_id`) VALUES (1, 'rdv medecin', '2019/02/02', '11:00', '12:00', 'ompo', 1, 3, 1);
INSERT INTO `eval_fin`.`events` (`id`, `title`, `date`, `start`, `end`, `description`, `patient_id`, `user_id`, `fiche_consultation_id`) VALUES (2, 'rdv acu', '2019/01/01', '17:00', '18:30', 'quotidien', 2, 3, 3);
INSERT INTO `eval_fin`.`events` (`id`, `title`, `date`, `start`, `end`, `description`, `patient_id`, `user_id`, `fiche_consultation_id`) VALUES (3, 'controle', '2019/10/12', '08:00', '08:30', 'orga', 1, 3, 2);

COMMIT;

